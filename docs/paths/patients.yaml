/patients:
  get:
    summary: Get all patients
    tags: [Patients]
    security:
      - bearerAuth: []
    responses:
      "200":
        description: List of patients (with user details)
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/Patient'
      "500":
        description: Server error

/patients/{id}:
  get:
    summary: Get patient by ID
    tags: [Patients]
    security:
      - bearerAuth: []
    parameters:
      - in: path
        name: id
        required: true
        schema:
          type: integer
    responses:
      "200":
        description: Patient details (with user details)
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Patient'
      "404":
        description: Patient not found
      "500":
        description: Server error
  put:
    summary: Update a patient (and optionally linked user)
    tags: [Patients]
    security:
      - bearerAuth: []
    parameters:
      - in: path
        name: id
        required: true
        schema:
          type: integer
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              patient:
                type: object
                description: Patient-specific fields
                properties:
                  medicalHistory:
                    type: string
                    example: "Asthma since 2010"
              user:
                type: object
                description: Linked user fields
                properties:
                  name:
                    type: string
                    example: Khaled Mansour
                  age:
                    type: integer
                    example: 28
                  gender:
                    type: string
                    enum: [male, female, other]
                    example: male
                  avatar:
                    type: string
                    format: uri
                    example: https://example.com/avatar.png
    responses:
      "200":
        description: Updated patient with user info
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Patient'
      "404":
        description: Patient not found
      "500":
        description: Server error
  delete:
    summary: Delete a patient
    tags: [Patients]
    security:
      - bearerAuth: []
    parameters:
      - in: path
        name: id
        required: true
        schema:
          type: integer
    responses:
      "200":
        description: Patient deleted successfully
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  example: Patient deleted successfully
      "404":
        description: Patient not found
      "500":
        description: Server error
